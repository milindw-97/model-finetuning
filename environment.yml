# Parakeet RNNT Hindi Fine-Tuning Conda Environment
#
# Create: conda env create -f environment.yml
# Activate: conda activate nemo-asr
#
# Note: For best results, use the Docker container instead.
# This conda environment is provided as an alternative for local development.

name: nemo-asr

channels:
  - conda-forge
  - pytorch
  - nvidia

dependencies:
  - python=3.10.12
  - pip>=23.0
  - ffmpeg>=5.0
  - libsndfile>=1.0

  # Install via pip for better version control
  - pip:
    # Core ML
    - torch>=2.1.0,<2.5.0
    - torchaudio>=2.1.0,<2.5.0

    # NeMo (includes many dependencies)
    - "nemo_toolkit[asr]>=2.0.0,<2.6.0"

    # PyTorch Lightning (NeMo compatible)
    - pytorch-lightning>=2.0.0,<2.4.0

    # CRITICAL: numpy < 2.0
    - "numpy>=1.22.0,<2.0.0"

    # Configuration
    - omegaconf>=2.3.0
    - hydra-core>=1.3.0

    # Audio
    - soundfile>=0.12.0
    - librosa>=0.10.0
    - scipy>=1.10.0

    # HuggingFace
    - datasets>=2.14.0
    - huggingface_hub>=0.20.0
    - transformers>=4.35.0

    # Tokenization
    - sentencepiece>=0.1.99

    # Evaluation
    - jiwer>=3.0.0

    # Utilities
    - tqdm>=4.65.0
    - pandas>=2.0.0
    - Cython>=0.29.0

# Post-install notes:
# 1. If on Windows, use WSL2 instead
# 2. Ensure CUDA drivers are installed (nvidia-smi should work)
# 3. Test with: python -c "import nemo.collections.asr as nemo_asr; print('NeMo OK')"
